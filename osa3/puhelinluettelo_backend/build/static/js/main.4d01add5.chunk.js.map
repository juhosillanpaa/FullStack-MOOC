{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","id","newObject","put","concat","post","delete","console","log","Notification","_ref","message","react_default","a","createElement","className","Error","_ref2","error","Button","_ref3","handler1","onClick","Person","_ref4","person","name","number","App_Button","Filter","_ref5","filter","handler","value","onChange","PersonForm","_ref6","onSubmit","handler2","Fragment","type","Persons","_ref7","rows","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setNewFilter","_useState9","_useState10","setMessage","_useState11","_useState12","setError","showMessage","text","setTimeout","showError","hook","personService","useEffect","namesToShow","toLowerCase","includes","App_Notification","App_Error","App_Filter","event","target","App_PersonForm","preventDefault","noteObject","length","catch","alert","window","confirm","temp","find","App_Persons","map","App_Person","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4d01add5.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n//const baseUrl = 'https://backend-demo.herokuapp.com/api/persons'\r\n\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\nconst update = (id, newObject ) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(console.log(\"done\"))\r\n}\r\n\r\nconst create = (newObject) =>{\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\nexport default {\r\n    getAll,\r\n    update,\r\n    create,\r\n    deletePerson\r\n}","\r\nimport React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\nimport './index.css'\r\n\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className=\"message\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n  const Error= ({ error }) => {\r\n    if (error === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className=\"error\">\r\n        {error}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n\r\n\r\nconst Button = ({handler1}) => (\r\n    <button onClick = {handler1}>\r\n        delete\r\n    </button>\r\n)\r\n\r\nconst Person = ({person,handler1}) =>{\r\n    return (\r\n        <li>{person.name} {person.number} <Button handler1 = {handler1} /> </li>\r\n    )\r\n}\r\nconst Filter = ({filter, handler}) => {\r\n    return(\r\n        <div>\r\n            filter shown with<input\r\n            value = {filter}\r\n            onChange = {handler}\r\n            />\r\n        </div>\r\n    )\r\n}\r\nconst PersonForm = ({onSubmit, name, handler1, number, handler2}) => {\r\n    return (\r\n        <>\r\n        <form onSubmit = {onSubmit}>\r\n            <div>\r\n                name: <input \r\n                value = {name}\r\n                onChange = {handler1}\r\n                />\r\n            </div>\r\n            <div>number: <input \r\n                value = {number}\r\n                onChange = {handler2}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n        </>\r\n    )\r\n}\r\nconst Persons = ({rows}) => {\r\n    return(\r\n        <>\r\n        {rows}\r\n        </>\r\n    )  \r\n}\r\n\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons] = useState([]) \r\n    const [ newName, setNewName ] = useState('')\r\n    const [ newNumber, setNewNumber ] = useState('')\r\n    const [newFilter, setNewFilter ] = useState('')\r\n    const [message, setMessage] = useState(null)\r\n    const [error, setError] = useState(null)\r\n\r\n    const handleFilterChange = (event) => setNewFilter(event.target.value)\r\n    const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n    const handleNameChange = (event) => setNewName(event.target.value)\r\n    const showMessage = (text) =>{\r\n        setMessage(text)\r\n        setTimeout(() =>{\r\n            setMessage(null)}, 4000)\r\n    }\r\n    const showError = (text) =>{\r\n        setError(text)\r\n        setTimeout(() =>{\r\n            setError(null)}, 4000)\r\n    }\r\n    const hook = () => {\r\n        personService\r\n          .getAll()\r\n          .then(response => setPersons(response))\r\n          \r\n    }\r\n    useEffect(hook, [])\r\n    \r\n    const namesToShow = !newFilter\r\n    ? persons\r\n    : persons.filter(person =>person.name.toLowerCase().includes(newFilter.toLowerCase()))\r\n\r\n    const rows = () => namesToShow.map(person =>\r\n        <Person\r\n            key = {person.name}\r\n            person = {person}\r\n            handler1 = {() => {\r\n                if (window.confirm(\"Do you really want to delete contact?\")){\r\n                    personService\r\n                        .deletePerson(person.id)\r\n                        .then(response =>{\r\n                            showMessage(`Person ${person.name} was deleted succesfully`)\r\n                            hook()\r\n                        })  \r\n                        .catch(error =>{\r\n                            console.log(error)\r\n                            showError(`Person ${person.name} was already deleted from server`)\r\n                            hook()\r\n                        })  \r\n                }\r\n            }}\r\n\r\n        />\r\n    )\r\n\r\n    const addName = (event) => {\r\n\t\tevent.preventDefault()\r\n\t\tconst noteObject = {\r\n            name: newName,\r\n            number: newNumber\r\n        }\r\n        if (!persons.filter(person => person.name.toLowerCase() === newName.toLowerCase()).length >0){\r\n            if (noteObject.number) {\r\n                personService\r\n                    .create(noteObject)\r\n                    .then(response => {\r\n                        showMessage(`Person ${newName} was added succesfully`)\r\n                        setPersons(persons.concat(response))\r\n                    })\r\n                    .catch(error =>{\r\n                        showError(`${error.response.data.error}`)\r\n                        console.log(error.response.data.error)\r\n                    })\r\n            } else {\r\n                alert(\"Number is missing\")\r\n            }\r\n        }\r\n        else{\r\n            if (window.confirm(`${newName} is already added to phonebook. Do you want to update the number?`)){\r\n                const temp = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\r\n                personService\r\n                    .update(temp.id, noteObject)\r\n                    .then(response =>{\r\n                        showMessage(`Number of ${temp.name} was updated succesfully`)\r\n                        hook()\r\n                    })\r\n                    .catch(error => console.log(error))\r\n            }\r\n        }\r\n        setNewName('')\r\n        setNewNumber('')\r\n        \r\n\t}\r\n\r\n    \r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message = {message}/>\r\n            <Error error = {error} />\r\n            <Filter filter = {newFilter} handler = {handleFilterChange}/>\r\n            \r\n            <h3>Add a new</h3>\r\n            <PersonForm onSubmit = {addName} name = {newName} handler1 = {handleNameChange} number = {newNumber} handler2 = {handleNumberChange} />\r\n            \r\n            <h2>Numbers</h2>\r\n            <Persons rows = {rows()} />\r\n        </div>\r\n    )     \r\n}\r\n\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\n/*\nOSA 2\nStep 12 done (2.20)\n*/\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}